(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,n){e.exports=n(22)},16:function(e,t,n){},18:function(e,t,n){},20:function(e,t,n){},22:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),r=n(9),i=n.n(r),s=n(2),o=n(3),u=n(5),c=n(4),d=n(6),h=n(7),m=n(1),v=(n(16),n(18),function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"renderSquare",value:function(e){var t=this,n="square";return this.props.grid[e.x][e.y]||(n+=" empty"),l.a.createElement("div",{className:n,key:e.x+e.y,onClick:function(n){return t.props.handleCellClick(e)}},this.props.grid[e.x][e.y])}},{key:"render",value:function(){var e,t=this;return e=this.props.grid.map(function(e,n){var a=e.map(function(e,a){return t.renderSquare({x:n,y:a})});return l.a.createElement("div",{className:"board-row",key:n},a)}),l.a.createElement("div",{className:"board"},e)}}]),t}(a.Component)),f=function(e,t){return Object(m.a)(Array(t+1).keys()).slice(e)};function y(e){var t=new Date(null);return t.setSeconds(e),t.toISOString().substr(14,5)}var g=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).isAValidGridCell=function(e){return function(t){return t.x>=0&&t.y>=0&&t.x<e.length&&t.y<e.length}},n.reset=function(){n.setState(n.getInitialPuzzleState(n.props.size),function(e){n.props.onReset({duration:n.state.duration,movesCount:n.state.movesCount})}),clearInterval(n.interval),n.interval=null},n.handleCellClick=function(e){var t,a,l=n.state.grid,r=n.state.gameWon;n.interval||(n.interval=setInterval(function(){return n.tick()},1e3),n.props.onStart({grid:(a=l,JSON.parse(JSON.stringify(a)))})),r||(t=n.findEmptyCellAmong(n.getNeighbourCells(e,l),l))&&(l=n.slideCell(e,t,l),n.isGridOrdered(l)&&(r=!0,clearInterval(n.interval)),n.setState({grid:l,movesCount:n.state.movesCount+1,gameWon:r},function(e){n.state.gameWon&&n.props.onSolved({duration:n.state.duration,movesCount:n.state.movesCount})}))},n.state=n.getInitialPuzzleState(e.size),n}return Object(d.a)(t,e),Object(o.a)(t,[{key:"getInitialPuzzleState",value:function(e){return{grid:this.makeShuffledGrid(e),duration:0,movesCount:0,gameWon:!1}}},{key:"makeGrid",value:function(e,t){return Array(e).fill(null).map(function(n,a){var l=a*e,r=l+e;return t.slice(l,r)})}},{key:"makeInitialGrid",value:function(e){return this.makeGrid(e,[].concat(Object(m.a)(f(1,Math.pow(e,2)-1)),[null]))}},{key:"makeShuffledGrid",value:function(e){var t=this.makeGrid(e,[].concat(Object(m.a)(function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=Math.floor(Math.random()*t.length);return n.length===t.length?n:(n.includes(t[a])||n.push(t[a]),e(t,n))}(f(1,Math.pow(e,2)-1))),[null]));return this.isGridWinnable(t)?t:this.makeShuffledGrid(e)}},{key:"isGridWinnable",value:function(e){return e.reduce(function(e,t){return[].concat(Object(m.a)(e),Object(m.a)(t))}).filter(function(e){return null!==e}).reduce(function(e,t,n,a){return e+a.slice(n).filter(function(e){return e<t}).length},0)%2===0}},{key:"isGridOrdered",value:function(e){var t=e.length;return function(e){var t=0,n=1,a=!0;do{if(!(a=e[t]<e[n]))return!1;t++,n++}while(n<e.length);return a}(e.reduce(function(e,t){return[].concat(Object(m.a)(e),Object(m.a)(t))}).filter(function(e){return null!==e}))&&null===e[t-1][t-1]}},{key:"getNeighbourCells",value:function(e,t){return e=Object(h.a)({},e),t=Object(m.a)(t),[{x:e.x-1,y:e.y},{x:e.x+1,y:e.y},{x:e.x,y:e.y-1},{x:e.x,y:e.y+1}].filter(this.isAValidGridCell(t))}},{key:"getNeighbours",value:function(e,t){var n=this;return e=Object(h.a)({},e),t=Object(m.a)(t),[{cell:{x:e.x,y:e.y-1},position:"left"},{cell:{x:e.x,y:e.y+1},position:"right"},{cell:{x:e.x-1,y:e.y},position:"top"},{cell:{x:e.x+1,y:e.y},position:"down"}].filter(function(e){return n.isAValidGridCell(t)(e.cell)})}},{key:"findEmptyCellAmong",value:function(e,t){return e.find(function(e){return null===t[e.x][e.y]})}},{key:"findEmptyCellOnGrid",value:function(e){var t;return{x:t=e.findIndex(function(e){return e.includes(null)}),y:e[t].findIndex(function(e){return null===e})}}},{key:"swapCellValues",value:function(e,t,n){var a=(n=Object(m.a)(n))[e.x][e.y];return n[e.x][e.y]=n[t.x][t.y],n[t.x][t.y]=a,n}},{key:"slideCell",value:function(e,t,n){return this.swapCellValues(e,t,n)}},{key:"moveEmptyCellTo",value:function(e){if(e){var t=this.state.grid,n=this.findEmptyCellOnGrid(t),a=this.getNeighbours(n,t).find(function(t){return t.position===e});a&&this.handleCellClick(a.cell)}}},{key:"slideTo",value:function(e){this.moveEmptyCellTo({top:"down",down:"top",left:"right",right:"left"}[e])}},{key:"tick",value:function(){this.setState(function(e){return{duration:e.duration+1}})}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement(v,{grid:this.state.grid,handleCellClick:this.handleCellClick}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",{className:"stats-board"},l.a.createElement("div",{className:"stat"},l.a.createElement("svg",{width:"20",height:"20",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},l.a.createElement("path",{d:"M17 16a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4.01V4a1 1 0 0 1 1-1 1 1 0 0 1 1 1v6h1V2a1 1 0 0 1 1-1 1 1 0 0 1 1 1v8h1V1a1 1 0 1 1 2 0v9h1V2a1 1 0 0 1 1-1 1 1 0 0 1 1 1v13h1V9a1 1 0 0 1 1-1h1v8z"})),l.a.createElement("span",{className:"stat-label"},this.state.movesCount)),l.a.createElement("div",{className:"stat"},l.a.createElement("svg",{width:"20",height:"20",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},l.a.createElement("path",{d:"M16.32 7.1A8 8 0 1 1 9 4.06V2h2v2.06c1.46.18 2.8.76 3.9 1.62l1.46-1.46 1.42 1.42-1.46 1.45zM10 18a6 6 0 1 0 0-12 6 6 0 0 0 0 12zM7 0h6v2H7V0zm5.12 8.46l1.42 1.42L10 13.4 8.59 12l3.53-3.54z"})),l.a.createElement("span",{className:"stat-label"},y(this.state.duration)))),this.state.gameWon?l.a.createElement("div",{className:"center pt-30"},l.a.createElement("div",{className:"roman-ribbon ooz-in"},l.a.createElement("span",null,"Puzzle Solved"))):null,l.a.createElement("div",{className:"center pt-30"},l.a.createElement("button",{className:"btn",onClick:this.reset},"Shuffle")))}},{key:"componentDidUpdate",value:function(e,t,n){this.props.slide.timestamp!==e.slide.timestamp&&this.slideTo(this.props.slide.direction)}}]),t}(a.Component),p=function(){function e(){Object(s.a)(this,e)}return Object(o.a)(e,[{key:"get",value:function(e,t){return JSON.parse(localStorage.getItem(e))||t}},{key:"set",value:function(e,t){localStorage.setItem(e,JSON.stringify(t))}}]),e}(),b=(n(20),function(e){function t(e){var n;Object(s.a)(this,t),(n=Object(u.a)(this,Object(c.a)(t).call(this,e))).handleStart=function(e){n.setState({isGamePlaying:!0})},n.handleReset=function(e){n.setState({isGamePlaying:!1,recordSmashed:!1})},n.handleSolved=function(e){var t=n.state.bestPlay,a=n.getBestGamePlay(n.saveGamePlay(e));if(a){var l=!!t&&!function(e,t){var n=Object.getOwnPropertyNames(e),a=Object.getOwnPropertyNames(t);if(n.length!==a.length)return!1;for(var l=0;l<n.length;l++){var r=n[l];if(e[r]!==t[r])return!1}return!0}(t,a);n.setState({bestPlay:a,isGamePlaying:!1,recordSmashed:l})}},n.storage=new p;var a=n.getBestGamePlay(n.storage.get("gamePlays",[]));return n.state={bestPlay:a,isGamePlaying:!1,recordSmashed:!1,puzzleSlide:{direction:null,timestamp:null}},n}return Object(d.a)(t,e),Object(o.a)(t,[{key:"saveGamePlay",value:function(e){var t=this.storage.get("gamePlays",[]);return t.push(e),this.storage.set("gamePlays",t),t}},{key:"sortGamePLays",value:function(e){return e.slice().sort(function(e,t){return e.duration-t.duration||e.moveCounts-t.moveCounts})}},{key:"getBestGamePlay",value:function(e){return this.sortGamePLays(e)[0]||null}},{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeydown.bind(this))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeydown.bind(this))}},{key:"handleKeydown",value:function(e){var t={39:"right",37:"left",38:"top",40:"down",87:"top",65:"left",83:"down",68:"right"}[e.keyCode];t&&this.setState({puzzleSlide:{direction:t,timestamp:Date.now()}})}},{key:"render",value:function(){var e=null;if(this.state.bestPlay){var t="best";this.state.isGamePlaying||(t+=" highlight"),this.state.recordSmashed&&(t+=" flash"),e=l.a.createElement("div",{className:t},l.a.createElement("div",{className:"flex-content-space-between"},l.a.createElement("div",{className:"flex-align-center"},l.a.createElement("svg",{width:"15",height:"15",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},l.a.createElement("path",{d:"M15 9a3 3 0 0 0 3-3h2a5 5 0 0 1-5.1 5 5 5 0 0 1-3.9 3.9V17l5 2v1H4v-1l5-2v-2.1A5 5 0 0 1 5.1 11H5a5 5 0 0 1-5-5h2a3 3 0 0 0 3 3V4H2v2H0V2h5V0h10v2h5v4h-2V4h-3v5z"})),l.a.createElement("span",{className:"best-stat-label"},"Best")),l.a.createElement("div",{className:"flex-align-center"},l.a.createElement("svg",{width:"15",height:"15",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},l.a.createElement("path",{d:"M17 16a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4.01V4a1 1 0 0 1 1-1 1 1 0 0 1 1 1v6h1V2a1 1 0 0 1 1-1 1 1 0 0 1 1 1v8h1V1a1 1 0 1 1 2 0v9h1V2a1 1 0 0 1 1-1 1 1 0 0 1 1 1v13h1V9a1 1 0 0 1 1-1h1v8z"})),l.a.createElement("span",{className:"best-stat-label"},this.state.bestPlay.movesCount)),l.a.createElement("div",{className:"flex-align-center"},l.a.createElement("svg",{width:"15",height:"15",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},l.a.createElement("path",{d:"M16.32 7.1A8 8 0 1 1 9 4.06V2h2v2.06c1.46.18 2.8.76 3.9 1.62l1.46-1.46 1.42 1.42-1.46 1.45zM10 18a6 6 0 1 0 0-12 6 6 0 0 0 0 12zM7 0h6v2H7V0zm5.12 8.46l1.42 1.42L10 13.4 8.59 12l3.53-3.54z"})),l.a.createElement("span",{className:"best-stat-label"},y(this.state.bestPlay.duration)))))}return l.a.createElement("div",{className:"container"},l.a.createElement("br",null),l.a.createElement("div",{className:"flex-content-space-between"},l.a.createElement("div",null),e),l.a.createElement("br",null),l.a.createElement(g,{size:4,slide:this.state.puzzleSlide,onStart:this.handleStart,onReset:this.handleReset,onSolved:this.handleSolved}))}}]),t}(a.Component));i.a.render(l.a.createElement(b,null),document.getElementById("root"))}},[[10,2,1]]]);
//# sourceMappingURL=main.a0063fa0.chunk.js.map